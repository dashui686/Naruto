var j=Object.defineProperty;var O=(o,i,m)=>i in o?j(o,i,{enumerable:!0,configurable:!0,writable:!0,value:m}):o[i]=m;var f=(o,i,m)=>(O(o,typeof i!="symbol"?i+"":i,m),m);import{h as Y,r as I,y as b,B as Z,n as ee,a2 as te,l as P,o as r,q as a,K as s,a3 as ae,a4 as oe,t as c,$ as ne,a0 as se,p as v,X as le,W as ie,k as p,J as B,S as ce,R as L,Q as M,G as re}from"./vue-cc6aeb83.js";import{_ as de,a as ue}from"./avatar-520fefc6.js";import{f as pe,o as me,p as he,q as S,t as fe,r as _e,k as ge,_ as we}from"./index-1ab2f843.js";import{l as T}from"./index-9162850f.js";import{b as g}from"./validate-080ffb17.js";const e={width:0,height:0,bubbleEl:null,canvas:null,ctx:{},circles:[],animate:!0,requestId:null},be=function(){e.width=window.innerWidth,e.height=window.innerHeight,e.bubbleEl=document.getElementById("bubble"),e.bubbleEl.style.height=e.height+"px",e.canvas=document.getElementById("bubble-canvas"),e.canvas.width=e.width,e.canvas.height=e.height,e.ctx=e.canvas.getContext("2d"),e.circles=[];for(let o=0;o<e.width*.5;o++){const i=new ve;e.circles.push(i)}$(),ye()};function U(){e.animate=!(document.body.scrollTop>e.height)}function N(){e.width=window.innerWidth,e.height=window.innerHeight,e.bubbleEl.style.height=e.height+"px",e.canvas.width=e.width,e.canvas.height=e.height}function $(){if(e.animate){e.ctx.clearRect(0,0,e.width,e.height);for(const o in e.circles)e.circles[o].draw()}e.requestId=requestAnimationFrame($)}class ve{constructor(){f(this,"pos");f(this,"alpha");f(this,"scale");f(this,"velocity");f(this,"draw");this.pos={x:Math.random()*e.width,y:e.height+Math.random()*100},this.alpha=.1+Math.random()*.3,this.scale=.1+Math.random()*.3,this.velocity=Math.random(),this.draw=function(){this.pos.y-=this.velocity,this.alpha-=5e-4,e.ctx.beginPath(),e.ctx.arc(this.pos.x,this.pos.y,this.scale*10,0,2*Math.PI,!1),e.ctx.fillStyle="rgba(255,255,255,"+this.alpha+")",e.ctx.fill()}}}function ye(){window.addEventListener("scroll",U),window.addEventListener("resize",N)}function xe(){window.removeEventListener("scroll",U),window.removeEventListener("resize",N),cancelAnimationFrame(e.requestId)}const C=o=>(ne("data-v-eeeeee16"),o=o(),se(),o),ke={class:"switch-language"},Ie=C(()=>r("canvas",{id:"bubble-canvas",class:"bubble-canvas"},null,-1)),Ce=[Ie],Ve={class:"login"},ze={class:"login-box"},Ee=C(()=>r("div",{class:"head"},[r("img",{src:de,alt:""})],-1)),Re={class:"form"},qe=C(()=>r("img",{class:"profile-avatar",src:ue,alt:""},null,-1)),Pe={class:"content"},Be=["src"],Le=Y({__name:"login",setup(o){var i;const m=pe(),A=me(),_=I({showCaptcha:!1,captchaId:S()}),y=()=>{t.captcha="",_.captchaId=S()},x=b(),V=b(),z=b(),E=b(),t=I({username:"",password:"",captcha:"",keep:!1,loading:!1,captcha_id:""}),{t:d}=he(),F=I({username:[g({name:"required",message:d("login.Please enter an account")}),g({name:"account"})],password:[g({name:"required",message:d("login.Please input a password")}),g({name:"password"})],captcha:[g({name:"required",title:d("login.Please enter the verification code")}),{min:4,max:6,message:d("login.The verification code length must be between 4 and 6 bits"),trigger:"blur"}]}),D=()=>{t.username===""?V.value.focus():t.password===""?z.value.focus():t.captcha===""&&E.value.focus()};Z(()=>{i=setTimeout(()=>{be()},1e3),T("get").then(h=>{_.showCaptcha=h.data.captcha,ee(()=>{D()})}).catch(h=>{console.log(h)})}),te(()=>{clearTimeout(i),xe()});const R=h=>{h&&h.validate(n=>{if(n)t.loading=!0,t.captcha_id=_.captchaId,T("post",t).then(u=>{t.loading=!1,A.dataFill(u.data.userInfo),re({message:u.msg,type:"success"}),_e.push({path:u.data.routePath})}).catch(()=>{y(),t.loading=!1});else return y(),!1})};return(h,n)=>{const u=c("Icon"),H=c("el-dropdown-item"),K=c("el-dropdown-menu"),W=c("el-dropdown"),k=c("el-input"),w=c("el-form-item"),q=c("el-col"),G=c("el-row"),J=c("el-checkbox"),Q=c("el-button"),X=c("el-form");return v(),P("div",null,[r("div",ke,[a(W,{size:"large","hide-timeout":50,placement:"bottom-end","hide-on-click":!0},{dropdown:s(()=>[a(K,{class:"chang-lang"},{default:s(()=>[(v(!0),P(le,null,ie(p(m).lang.langArray,l=>(v(),B(H,{key:l.name,onClick:Me=>p(ge)(l.name)},{default:s(()=>[L(M(l.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:s(()=>[a(u,{name:"fa fa-globe",color:"var(--el-text-color-secondary)",size:"28"})]),_:1})]),r("div",{onContextmenu:n[0]||(n[0]=ae(()=>{},["stop"])),id:"bubble",class:"bubble"},Ce,32),r("div",Ve,[r("div",ze,[Ee,r("div",Re,[qe,r("div",Pe,[a(X,{onKeyup:n[6]||(n[6]=oe(l=>R(x.value),["enter"])),ref_key:"formRef",ref:x,rules:F,size:"large",model:t},{default:s(()=>[a(w,{prop:"username"},{default:s(()=>[a(k,{ref_key:"usernameRef",ref:V,type:"text",clearable:"",modelValue:t.username,"onUpdate:modelValue":n[1]||(n[1]=l=>t.username=l),placeholder:p(d)("login.Please enter an account")},{prefix:s(()=>[a(u,{name:"fa fa-user",class:"form-item-icon",size:"16",color:"var(--el-input-icon-color)"})]),_:1},8,["modelValue","placeholder"])]),_:1}),a(w,{prop:"password"},{default:s(()=>[a(k,{ref_key:"passwordRef",ref:z,modelValue:t.password,"onUpdate:modelValue":n[2]||(n[2]=l=>t.password=l),type:"password",placeholder:p(d)("login.Please input a password"),"show-password":""},{prefix:s(()=>[a(u,{name:"fa fa-unlock-alt",class:"form-item-icon",size:"16",color:"var(--el-input-icon-color)"})]),_:1},8,["modelValue","placeholder"])]),_:1}),_.showCaptcha?(v(),B(w,{key:0,prop:"captcha"},{default:s(()=>[a(G,{class:"w100",gutter:15},{default:s(()=>[a(q,{span:16},{default:s(()=>[a(k,{ref_key:"captchaRef",ref:E,type:"text",placeholder:p(d)("login.Please enter the verification code"),modelValue:t.captcha,"onUpdate:modelValue":n[3]||(n[3]=l=>t.captcha=l),clearable:"",autocomplete:"off"},{prefix:s(()=>[a(u,{name:"fa fa-ellipsis-h",class:"form-item-icon",size:"16",color:"var(--el-input-icon-color)"})]),_:1},8,["placeholder","modelValue"])]),_:1}),a(q,{span:8},{default:s(()=>[r("img",{onClick:y,class:"captcha-img",src:p(fe)()+"&id="+_.captchaId,alt:""},null,8,Be)]),_:1})]),_:1})]),_:1})):ce("",!0),a(J,{modelValue:t.keep,"onUpdate:modelValue":n[4]||(n[4]=l=>t.keep=l),label:p(d)("login.Hold session"),size:"default"},null,8,["modelValue","label"]),a(w,null,{default:s(()=>[a(Q,{loading:t.loading,class:"submit-button",round:"",type:"primary",size:"large",onClick:n[5]||(n[5]=l=>R(x.value))},{default:s(()=>[L(M(p(d)("login.Sign in")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["rules","model"])])])])])])}}});const Fe=we(Le,[["__scopeId","data-v-eeeeee16"]]);export{Fe as default};
